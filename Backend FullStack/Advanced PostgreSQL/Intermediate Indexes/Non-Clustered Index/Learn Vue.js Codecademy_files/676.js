(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[676],{bY6Y:function(e,t,r){"use strict";r.r(t),r.d(t,"mochaTest",(function(){return mochaTest}));var s=r("5rFJ"),o=r("4Te6");const n="/home/ccuser/.babelscripts/mocha-setup.js",a="test/test.js";function*mochaTest(e,{updateFiles:t,executeCommand:r,getWorkspaceType:l}){try{const i=e.test_code,c=e.test_options.withBabel,d=void 0!==c&&c,u=new o.a({path:a,content:i});yield Object(s.call)(t,[u]);const h=yield Object(s.call)(l),p=yield Object(s.call)(r,((e,t)=>{const r=["mocha","-R","json"];return e&&("node-14"===t?r.push("--require","@babel/register"):"react-16"===t?r.push("--compilers","js:@babel/register",n):r.push("--compilers","js:babel-register",n)),r.push(a),r.join(" ")})(d,h)),m={friendly:"",tool:"",eval:""};let f,g=!1;if(p.Content){try{f=JSON.parse(p.Content)}catch(e){m.tool=p.Content}if(f){const e=f,t=e.failures,r=void 0===t?[]:t,s=e.passes,o=void 0===s?[]:s;r.length?((e,t)=>{t.forEach(((t,r)=>{var s;if(t.err.message&&t.err.message.indexOf("Invalid Chai property")>=0)e.tool="An error occurred while attempting to check your code.",e.eval="Invalid Chai property";else if(t.err.message&&t.err.message.lastIndexOf(":")>=0){const r=t.err.message.lastIndexOf(":"),s=t.err.message.substring(0,r);e.friendly+=`${s}\n`}else null!==(s=t.err)&&void 0!==s&&s.type?e.tool+=`${t.err.stack}\n`:0===r&&t.fullTitle&&(e.friendly+=`${t.fullTitle.trim()}`)}))})(m,r):!r.length&&o.length&&(g=!0)}}return{errors:m,pass:g}}catch(e){return{pass:!1,errors:{friendly:e.message||"Failed to test your code."}}}}t.default=mochaTest}}]);
//# sourceMappingURL=676.5bea106abe4b160b80ef.chunk.js.map